<nz-card nzSize="small" class="ml-[5px] w-full max-w-none rounded-[10px]">
  <div class="mb-4 flex flex-wrap items-center gap-3">
    <input
      nz-input
      placeholder="Filter by model"
      [(ngModel)]="modelFilter"
      (keyup.enter)="applyFilters()"
      class="max-w-[240px]"
    />
    <label nz-checkbox [(ngModel)]="onlyUnrated" (ngModelChange)="applyFilters()">
      Only not rated
    </label>
  </div>
  <nz-table
    [nzData]="submits"
    [nzLoading]="isLoading"
    nzSize="small"
    nzBordered
    [nzFrontPagination]="false"
    [nzTotal]="totalSubmits"
    [nzPageSize]="pageSize"
    [nzPageIndex]="pageIndex"
    [nzShowSizeChanger]="true"
    [nzScroll]="{ y: '480px' }"
    [nzPageSizeOptions]="[10, 20, 50]"
    (nzPageIndexChange)="onPageIndexChange($event)"
    (nzPageSizeChange)="onPageSizeChange($event)"
  >
    <thead>
    <tr>
      <th>Id</th>
      <th>Model</th>
      <th>Prompt path</th>
      <th>Source path</th>
      <th>Submit date</th>
      <th>Rated</th>
      <th></th>
    </tr>
    </thead>

    <tbody>
      @for (submit of submits; track $index) {
        <tr>
          <td>{{ submit.id }}</td>
          <td>{{ submit.model }}</td>
          <td>
            <a
              [routerLink]="['/prompts']"
              [queryParams]="{prompt: submit.prompt_path}"
              class="text-blue-600 hover:text-blue-500"
            >
              {{ submit.prompt_path }}
            </a>
          </td>
          <td>
            <a
              [routerLink]="['/sources']"
              [queryParams]="{source: submit.source_path}"
              class="text-blue-600 hover:text-blue-500"
            >
              {{ submit.source_path }}
            </a>
          </td>
          <td>{{ submit.created_at | date:'yyyy-MM-dd HH:mm:ss' }}</td>
          <td class="text-center">
            <nz-tag [nzColor]="submit.rated ? 'green' : 'red'">
              {{ submit.rated ? 'Yes' : 'No' }}
            </nz-tag>
          </td>
          <td class="text-center">
            <a nz-button nzType="primary" [routerLink]="['/submits', submit.id]">Rate</a>
          </td>
        </tr>
      }
    </tbody>
  </nz-table>
</nz-card>
